<!doctype html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  iframe {
    border: 0;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    position: absolute;
  }
</style>
<iframe
    local-src="http://localhost:9000/open-dance/cache-stub.html"
    src="https://cramforce.github.io/playground/open-dance/cache-stub2.html?2" scrollable></iframe>

<script>
  (function() {
  function maybeClose() {
    if (history.state && history.state.stub) {
      try {
        opener.focus();
      } catch (e) {
        console.error(e);
      }
      window.close();
    }
  }
  maybeClose();
  history.replaceState({'stub': true}, '', location.href);
  history.pushState(null, '', './example.html');
  window.onpopstate = function() {
    maybeClose();
  }
  })()
</script>
